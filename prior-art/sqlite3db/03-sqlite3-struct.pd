#N struct mystruct float one float two symbol three;
#N canvas 284 197 640 422 10;
#X obj 35 24 sqlite3db-gui data3;
#X obj 35 200 print data3;
#X obj 168 200 print data3-done;
#X obj 35 240 sqlite3db-master data3;
#N canvas 0 22 450 300 mystructdata 0;
#X scalar mystruct 0.30476 0.05608 x_4 \;;
#X scalar mystruct 0.27861 0.68929 y_6 \;;
#X scalar mystruct 0.09264 0.35448 x_5 \;;
#X scalar mystruct 0.79797 0.55899 x_5 \;;
#X scalar mystruct 0.13622 0.06836 x_0 \;;
#X scalar mystruct 0.22104 0.3727 x_3 \;;
#X scalar mystruct 0.8859 0.38577 x_1 \;;
#X scalar mystruct 0.91291 0.52912 y_8 \;;
#X scalar mystruct 0.92017 0.91598 x_1 \;;
#X scalar mystruct 0.24736 0.91246 x_0 \;;
#X scalar mystruct 0.74197 0.91566 y_6 \;;
#X scalar mystruct 0.91104 0.75131 x_3 \;;
#X scalar mystruct 0.4657 0.65552 y_9 \;;
#X scalar mystruct 0.84833 0.36815 x_5 \;;
#X scalar mystruct 0.89486 0.42762 y_6 \;;
#X scalar mystruct 0.34675 0.31946 x_1 \;;
#X scalar mystruct 0.49032 0.6934 x_2 \;;
#X scalar mystruct 0.76304 0.42652 y_8 \;;
#X scalar mystruct 0.72921 0.87214 x_3 \;;
#X scalar mystruct 0.38988 0.1968 x_2 \;;
#X scalar mystruct 0.35439 0.27028 x_0 \;;
#X scalar mystruct 0.96321 0.13592 x_1 \;;
#X scalar mystruct 0.01466 0.65113 y_7 \;;
#X scalar mystruct 0.31016 0.45035 y_7 \;;
#X scalar mystruct 0.79546 0.94542 y_6 \;;
#X scalar mystruct 0.63763 0.64063 y_6 \;;
#X scalar mystruct 0.14026 0.6023 x_4 \;;
#X scalar mystruct 0.96152 0.48526 x_5 \;;
#X scalar mystruct 0.66263 0.08107 y_9 \;;
#X scalar mystruct 0.17649 0.91525 y_9 \;;
#X scalar mystruct 0.3488 0.98351 y_9 \;;
#X scalar mystruct 0.2665 0.27919 y_9 \;;
#X scalar mystruct 0.65097 0.32681 y_8 \;;
#X scalar mystruct 0.15578 0.49908 x_2 \;;
#X scalar mystruct 0.9712 0.45717 x_1 \;;
#X scalar mystruct 0.70062 0.61667 y_8 \;;
#X scalar mystruct 0.03588 0.10397 y_6 \;;
#X scalar mystruct 0.32164 0.2305 y_6 \;;
#X scalar mystruct 0.66091 0.07462 y_8 \;;
#X scalar mystruct 0.77676 0.32352 x_2 \;;
#X scalar mystruct 0.40743 0.08998 x_1 \;;
#X scalar mystruct 0.57476 0.98134 y_9 \;;
#X scalar mystruct 0.62824 0.26047 x_5 \;;
#X scalar mystruct 0.52952 0.50116 y_7 \;;
#X scalar mystruct 0.40478 0.70273 x_0 \;;
#X scalar mystruct 0.95477 0.39123 y_8 \;;
#X scalar mystruct 0.87478 0.797 x_2 \;;
#X scalar mystruct 0.9996 0.76104 x_5 \;;
#X scalar mystruct 0.45054 0.58499 y_7 \;;
#X scalar mystruct 0.62454 0.60203 x_1 \;;
#X scalar mystruct 0.42776 0.80854 x_4 \;;
#X scalar mystruct 0.71821 0.459 x_3 \;;
#X scalar mystruct 0.48512 0.08874 x_3 \;;
#X scalar mystruct 0.85466 0.99213 x_4 \;;
#X scalar mystruct 0.57439 0.74583 x_5 \;;
#X scalar mystruct 0.19136 0.92962 x_5 \;;
#X scalar mystruct 0.70116 0.75957 y_8 \;;
#X scalar mystruct 0.00772 0.91091 x_5 \;;
#X scalar mystruct 0.09628 0.3704 x_3 \;;
#X scalar mystruct 0.38433 0.72063 x_4 \;;
#X scalar mystruct 0.27785 0.82105 y_6 \;;
#X scalar mystruct 0.52275 0.41305 x_3 \;;
#X scalar mystruct 0.50382 0.73895 x_3 \;;
#X scalar mystruct 0.20599 0.82726 y_7 \;;
#X scalar mystruct 0.11532 0.6591 x_1 \;;
#X scalar mystruct 0.89956 0.99293 x_1 \;;
#X scalar mystruct 0.27051 0.18771 x_5 \;;
#X scalar mystruct 0.99319 0.92665 x_4 \;;
#X scalar mystruct 0.56906 0.30637 x_3 \;;
#X scalar mystruct 0.68313 0.319 x_1 \;;
#X scalar mystruct 0.06736 0.31685 x_3 \;;
#X scalar mystruct 0.99513 0.61216 x_5 \;;
#X scalar mystruct 0.18421 0.92661 y_6 \;;
#X scalar mystruct 0.44798 0.96816 x_2 \;;
#X scalar mystruct 0.99727 0.97481 y_9 \;;
#X scalar mystruct 0.85774 0.6278 x_5 \;;
#X scalar mystruct 0.43002 0.29906 x_5 \;;
#X scalar mystruct 0.78255 0.16014 y_9 \;;
#X scalar mystruct 0.82942 0.2427 y_8 \;;
#X scalar mystruct 0.10806 0.10262 x_3 \;;
#X scalar mystruct 0.43416 0.30279 y_8 \;;
#X scalar mystruct 0.27356 0.49186 x_5 \;;
#X scalar mystruct 0.23358 0.41867 x_2 \;;
#X scalar mystruct 0.6386 0.78501 x_4 \;;
#X scalar mystruct 0.71714 0.40114 x_0 \;;
#X scalar mystruct 0.4904 0.6718 x_4 \;;
#X scalar mystruct 0.01458 0.0023 x_5 \;;
#X scalar mystruct 0.19173 0.27714 x_5 \;;
#X scalar mystruct 0.92666 0.126 x_2 \;;
#X scalar mystruct 0.96952 0.25441 y_8 \;;
#X scalar mystruct 0.34659 0.67893 y_8 \;;
#X scalar mystruct 0.84404 0.26932 x_4 \;;
#X scalar mystruct 0.57199 0.56229 x_1 \;;
#X scalar mystruct 0.19875 0.37445 y_8 \;;
#X scalar mystruct 0.00757 0.30411 y_6 \;;
#X scalar mystruct 0.49073 0.77436 x_2 \;;
#X scalar mystruct 0.75836 0.83224 x_0 \;;
#X scalar mystruct 0.60175 0.48138 x_1 \;;
#X scalar mystruct 0.61361 0.88789 y_8 \;;
#X scalar mystruct 0.32998 0.36196 y_9 \;;
#X restore 492 158 pd mystructdata;
#N canvas 531 22 452 619 mystruct 0;
#X obj 23 24 struct mystruct float one float two symbol three;
#X msg 35 104 struct mystruct float one float two symbol three;
#X obj 35 134 route struct;
#X obj 35 164 list split 1;
#X obj 35 194 t b a;
#X obj 67 224 s \$0-set-struct-name;
#X obj 267 224 r \$0-set-struct-name;
#X obj 267 245 print;
#X obj 87 194 s \$0-forward-01;
#X obj 87 254 r \$0-forward-01;
#X obj 35 284 list;
#X obj 35 304 list split 2;
#X obj 35 254 until;
#X obj 35 334 list split 1;
#X obj 35 459 list prepend;
#X obj 36 483 print;
#X obj 35 388 route float symbol;
#X obj 35 358 list trim;
#X obj 35 422 symbol double;
#X obj 144 423 symbol varchar;
#X obj 91 281 b;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 3 1 8 0;
#X connect 4 0 12 0;
#X connect 4 1 5 0;
#X connect 6 0 7 0;
#X connect 9 0 10 1;
#X connect 10 0 11 0;
#X connect 11 0 13 0;
#X connect 11 1 10 1;
#X connect 11 2 20 0;
#X connect 12 0 10 0;
#X connect 13 0 17 0;
#X connect 13 1 14 1;
#X connect 14 0 15 0;
#X connect 16 0 18 0;
#X connect 16 1 19 0;
#X connect 17 0 16 0;
#X connect 18 0 14 0;
#X connect 19 0 14 0;
#X connect 20 0 12 1;
#X restore 492 133 pd mystruct;
#N canvas 269 93 522 245 show-db 0;
#X obj 40 130 sqlite3query select * from mystruct;
#X obj 20 50 bng 15 250 50 0 empty empty Step 17 7 0 12 -262144 -1
-1;
#X obj 20 33 bng 15 250 50 0 empty empty Reset 17 7 0 12 -262144 -1
-1;
#X msg 41 90 reset;
#X obj 282 170 print data3-show-db-done;
#X obj 40 200 print data3-show-db-results;
#X obj 68 110 r data3-prepare;
#X obj 161 171 s \$0-db-errors;
#X obj 161 150 list prepend show-db;
#X connect 0 0 5 0;
#X connect 0 1 8 0;
#X connect 0 2 4 0;
#X connect 1 0 0 0;
#X connect 2 0 3 0;
#X connect 3 0 0 0;
#X connect 6 0 0 0;
#X connect 8 0 7 0;
#X coords 0 -1 1 1 85 60 1 10 10;
#X restore 362 332 pd show-db;
#N canvas 37 312 708 335 to-db 0;
#X obj 20 45 bng 15 250 50 0 empty empty ToDB 17 7 0 12 -262144 -1
-1;
#X obj 60 124 sqlite3query begin;
#X obj 20 214 sqlite3query commit;
#N canvas 0 22 450 300 extract-data 0;
#X obj 107 195 get mystruct one two three;
#X msg 139 55 traverse pd-mystructdata;
#X obj 107 145 pointer;
#X obj 107 105 until;
#X msg 107 125 next;
#X obj 153 165 s \$0-struct-done1;
#X obj 139 85 r \$0-struct-done1;
#X obj 107 215 t b f;
#X obj 139 235 pack f f s;
#X obj 107 15 inlet;
#X obj 107 35 t b b;
#X obj 107 265 outlet;
#X connect 0 0 7 0;
#X connect 0 1 8 1;
#X connect 0 2 8 2;
#X connect 1 0 2 0;
#X connect 2 0 0 0;
#X connect 2 1 5 0;
#X connect 3 0 4 0;
#X connect 4 0 2 0;
#X connect 6 0 3 1;
#X connect 7 0 11 0;
#X connect 7 1 8 0;
#X connect 8 0 11 0;
#X connect 9 0 10 0;
#X connect 10 0 3 0;
#X connect 10 1 1 0;
#X restore 40 154 pd extract-data;
#X obj 123 54 r data3-prepare;
#X obj 40 174 sqlite3query insert into mystruct values(?1 \, ?2 \,
?3);
#X obj 20 84 t b b b b;
#X obj 402 215 f;
#X obj 436 215 + 1;
#X msg 419 193 0;
#X obj 340 281 print data3-inserted;
#X obj 340 261 f;
#X obj 151 291 s \$0-db-errors;
#X obj 151 270 list prepend to-db;
#X obj 197 201 t a b;
#X obj 229 223 s \$0-struct-done1;
#X text 258 68 This demonstrates how to get the data from a struct
instance into a database. Granted \, while this does not allow for
dealing with arrays \, it can be easily adapted to deal with them.
;
#X connect 0 0 6 0;
#X connect 1 1 13 0;
#X connect 2 1 13 0;
#X connect 2 2 11 0;
#X connect 3 0 5 0;
#X connect 4 0 1 0;
#X connect 4 0 2 0;
#X connect 4 0 5 0;
#X connect 5 1 14 0;
#X connect 5 2 7 0;
#X connect 6 0 2 0;
#X connect 6 1 3 0;
#X connect 6 2 1 0;
#X connect 6 3 9 0;
#X connect 7 0 8 0;
#X connect 8 0 7 1;
#X connect 8 0 11 1;
#X connect 9 0 7 1;
#X connect 11 0 10 0;
#X connect 13 0 12 0;
#X connect 14 0 13 0;
#X connect 14 1 15 0;
#X coords 0 -1 1 1 85 60 1 10 10;
#X restore 362 206 pd to-db;
#N canvas 109 132 340 369 show 0;
#X obj 115 202 get mystruct one two three;
#X msg 147 62 traverse pd-mystructdata;
#X obj 115 152 pointer;
#X obj 115 112 until;
#X msg 115 132 next;
#X obj 161 172 s \$0-struct-done1;
#X obj 147 92 r \$0-struct-done1;
#X obj 115 275 print show-struct;
#X obj 115 42 t b b;
#X obj 115 231 pack f f s;
#X obj 20 29 bng 15 250 50 0 empty empty All 17 7 0 12 -262144 -1 -1
;
#X obj 20 63 bng 15 250 50 0 empty empty Reset 17 7 0 12 -262144 -1
-1;
#X obj 20 46 bng 15 250 50 0 empty empty Step 17 7 0 12 -262144 -1
-1;
#X obj 20 80 bng 15 250 50 0 empty empty Clear 17 7 0 12 -262144 -1
-1;
#X msg 20 300 \; pd-mystructdata clear \;;
#X obj 175 152 print show-struct-done;
#X connect 0 0 9 0;
#X connect 0 1 9 1;
#X connect 0 2 9 2;
#X connect 1 0 2 0;
#X connect 2 0 0 0;
#X connect 2 1 5 0;
#X connect 2 1 15 0;
#X connect 3 0 4 0;
#X connect 4 0 2 0;
#X connect 6 0 3 1;
#X connect 8 0 3 0;
#X connect 8 1 1 0;
#X connect 9 0 7 0;
#X connect 10 0 8 0;
#X connect 11 0 1 0;
#X connect 12 0 4 0;
#X connect 13 0 14 0;
#X coords 0 -1 1 1 85 95 1 10 10;
#X restore 492 244 pd show;
#N canvas 161 22 756 588 fill 0;
#X msg 388 206 traverse pd-mystructdata \, bang;
#X obj 388 226 pointer;
#X msg 282 126 \; pd-mystructdata clear \;;
#X obj 51 127 t b b b;
#X floatatom 51 47 5 0 0 0 Rows - -;
#X obj 51 107 until;
#X obj 230 306 append mystruct one two;
#X obj 51 352 set -symbol mystruct three;
#X obj 51 312 pack s f;
#X msg 51 332 symbol \$1_\$2;
#X obj 51 162 t b b;
#X obj 51 202 f;
#X obj 51 242 select 0;
#X obj 51 282 symbol x;
#X obj 115 282 symbol y;
#X obj 115 262 t b;
#X obj 78 182 random 10;
#X obj 51 222 > 5;
#X obj 51 77 t f b b;
#X obj 268 216 100000;
#X obj 230 266 random;
#X obj 308 266 random;
#X obj 230 286 /;
#X obj 308 286 /;
#X obj 268 196 loadbang;
#X connect 0 0 1 0;
#X connect 1 0 6 2;
#X connect 3 0 10 0;
#X connect 3 1 20 0;
#X connect 3 2 21 0;
#X connect 4 0 18 0;
#X connect 5 0 3 0;
#X connect 6 0 7 1;
#X connect 8 0 9 0;
#X connect 9 0 7 0;
#X connect 10 0 11 0;
#X connect 10 1 16 0;
#X connect 11 0 17 0;
#X connect 12 0 13 0;
#X connect 12 1 15 0;
#X connect 13 0 8 0;
#X connect 14 0 8 0;
#X connect 15 0 14 0;
#X connect 16 0 11 1;
#X connect 16 0 8 1;
#X connect 17 0 12 0;
#X connect 18 0 5 0;
#X connect 18 1 0 0;
#X connect 18 2 2 0;
#X connect 19 0 20 1;
#X connect 19 0 21 1;
#X connect 19 0 23 1;
#X connect 19 0 22 1;
#X connect 20 0 22 0;
#X connect 21 0 23 0;
#X connect 22 0 6 0;
#X connect 23 0 6 1;
#X connect 24 0 19 0;
#X coords 0 -1 1 1 85 60 1 10 10;
#X restore 492 181 pd fill;
#N canvas 197 197 435 402 from-db 0;
#X obj 20 45 bng 15 250 50 0 empty empty FromDB 17 7 0 12 -262144 -1
-1;
#X msg 178 174 traverse pd-mystructdata \, bang;
#X obj 178 194 pointer;
#X obj 20 175 until;
#X obj 262 244 s \$0-struct-done2;
#X obj 52 155 r \$0-struct-done2;
#X msg 80 105 \; pd-mystructdata clear \;;
#X obj 20 224 sqlite3query select * from mystruct;
#X obj 20 305 t b a;
#X obj 20 325 symbol;
#X obj 20 345 set -symbol mystruct three;
#X obj 20 285 append mystruct one two;
#X obj 20 254 unpack f f s;
#X obj 37 194 r data3-prepare;
#X obj 20 75 t b b b b;
#X msg 40 135 reset;
#X obj 231 291 s \$0-db-errors;
#X obj 231 270 list prepend from-db;
#X connect 0 0 14 0;
#X connect 1 0 2 0;
#X connect 2 0 11 2;
#X connect 3 0 7 0;
#X connect 5 0 3 1;
#X connect 7 0 12 0;
#X connect 7 1 17 0;
#X connect 7 2 4 0;
#X connect 8 0 9 0;
#X connect 8 1 10 1;
#X connect 9 0 10 0;
#X connect 11 0 8 0;
#X connect 12 0 11 0;
#X connect 12 1 11 1;
#X connect 12 2 9 1;
#X connect 13 0 7 0;
#X connect 14 0 3 0;
#X connect 14 1 15 0;
#X connect 14 2 1 0;
#X connect 14 3 6 0;
#X connect 15 0 7 0;
#X connect 17 0 16 0;
#X coords 0 -1 1 1 85 60 1 10 10;
#X restore 362 269 pd from-db;
#N canvas 133 146 479 219 make-db 0;
#X obj 20 45 bng 15 250 50 0 empty empty MakeDB 17 7 0 12 -262144 -1
-1;
#X obj 20 75 symbol data3;
#X msg 19 95 \; \$1 open :memory: \; \$1-sql create table mystruct(one
double \, two double \, three varchar) \; \$1 bang \; \$1-prepare use
\$1 \;;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X coords 0 -1 1 1 85 60 1 10 10;
#X restore 362 143 pd make-db;
#X text 337 142 (1);
#X text 467 180 (2);
#X text 467 243 (3);
#X text 336 206 (4);
#X text 467 283 (5);
#X text 336 269 (6);
#X text 467 263 (7);
#X obj 44 178 r \$0-db-errors;
#X text 298 33 (1) Open the database \, and create the table \; (2)
Create the Pd struct data \; (3) Verify the Pd struct data \; (4) Copy
the Pd struct data to the database \; (5) Clear the Pd struct data
\; (6) Copy the database back into the Pd struct \; (7) Verify the
Pd struct data \;;
#X connect 0 0 1 0;
#X connect 0 1 2 0;
#X connect 19 0 1 0;
